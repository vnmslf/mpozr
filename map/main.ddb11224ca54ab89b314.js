!function(){"use strict";var n,e={354:function(n,e,t){t(358),t(194),t(148);var a=t(716),o=t(817),i=t(610),r=t(516),s=t(545),l=t(621),c=t(954),u=t(536),d=t(978),p=t(6),g=t(683),b=t(994),m=t(229),h=t(127),v=t(286),I=Object.freeze({AmoCrm:"amocrm",BitrixCms:"bitrix_cms",CsCartCms:"cs_cart",InsalesCms:"insales",ShopScriptCms:"shop_script"}),f=Object.freeze({DisableAll:"disable_all",ShowAdditionalTime:"show_additional_time"}),y=Object.freeze({RussianPost:"russian_post",AdditionalPvz:"additional_pvz",Postamat:"postamat"}),C=Object.freeze({PostalParcel:"POSTAL_PARCEL",OnlineParcel:"ONLINE_PARCEL",FirstClassParcel:"PARCEL_CLASS_1",EcomMarketplace:"ECOM_MARKETPLACE"}),M=Object.freeze({CardPayment:"cardPayment",CashPayment:"cashPayment",ContentsChecking:"contentsChecking",FunctionalityChecking:"functionalityChecking",Prepayment:"prepayment",PartialRedemption:"partialRedemption",ReturnAvailable:"returnAvailable",WithFitting:"withFitting"}),w='\n  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor">\n    <path fill-rule="evenodd"\n      d="M4 2a1 1 0 000 2h16a1 1 0 100-2H4zm-.32 11H4v7a1 1 0 102 0v-7h4v6.16c0 1.02.82 1.84 1.84 1.84h6.32c1.02 0 1.84-.82 1.84-1.84V13h.32c.93 0 1.68-.75 1.68-1.68V7.68C22 6.75 21.25 6 20.32 6H3.68C2.75 6 2 6.75 2 7.68v3.64c0 .93.75 1.68 1.68 1.68zM18 13h-6v6h6v-6z"\n      clip-rule="evenodd" />\n  </svg>\n',A='\n  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor">\n    <path fill-rule="evenodd"\n      d="M10 5h4v4h-4V5Zm6-2H5a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3h-3Zm4 4V6a1 1 0 0 0-1-1h-3v9h4v-2h-1a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1Zm-6 4v3h-4v-3h4Zm0 8v-3h-4v3h4Zm2-3v3h3a1 1 0 0 0 1-1v-2h-4ZM8 9V5H5a1 1 0 0 0-1 1v3h4Zm-4 2v3h4v-3H4Zm4 5H4v2a1 1 0 0 0 1 1h3v-3Z"\n      clip-rule="evenodd" />\n  </svg>\n',_='\n  <div class="preloader">\n    <svg class="preloader__spinner" width="40px" height="40px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">\n      <circle class="preloader__path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>\n    </svg>\n  </div>\n',j='\n  <div class="cluster-balloon__tabs">\n    {% for geoObject in properties.geoObjects %}\n      {% if (geoObject.properties.orderNumber == 1) %}\n        {% if (geoObject.properties.index[0] === \'9\') %}\n          <button class="cluster-balloon__tab-item postamat" data-contentid="{{ geoObject.properties.placemarkId }}" type="button">\n            '.concat(A,'\n          </button>\n        {% else %}\n          <button class="cluster-balloon__tab-item" data-contentid="{{ geoObject.properties.placemarkId }}" type="button">\n            ').concat(w,'\n          </button>\n        {% endif %}\n      {% endif %}\n    {% endfor %}\n  </div>\n\n  {% for geoObject in properties.geoObjects %}\n    <div class="cluster-balloon__tab-content" id="{{ geoObject.properties.placemarkId }}">\n      {{ geoObject.properties.balloonContent|raw }}\n    </div>\n  {% endfor %}\n');function D(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function P(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?D(Object(t),!0).forEach((function(e){Z(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Z(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function T(n){return function(n){if(Array.isArray(n))return x(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||L(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var a,o,i=[],r=!0,s=!1;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(n){s=!0,o=n}finally{try{r||null==t.return||t.return()}finally{if(s)throw o}}return i}}(n,e)||L(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(n,e){if(n){if("string"==typeof n)return x(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x(n,e):void 0}}function x(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=n[t];return a}document.addEventListener("DOMContentLoaded",(function(){var n=new a.x,e=new Set,D=new Set,L=new Map,x=null,N=0,z=null,S=null,O=null,G=null,E=null;function R(){$(".cluster-balloon__tabs").find(".cluster-balloon__tab-item:eq(".concat(N,")")).trigger("click")}function W(){var t,a,i=new ymaps.Map("map",{center:[55.76,37.64],controls:G.mapSettings?(a=G.mapSettings,Object.entries(a).filter((function(n){var e=k(n,2)[1];return Boolean(e)})).map((function(n){return k(n,1)[0]}))):[],zoom:12},{balloonAutoPan:!0,balloonAutoPanMargin:0,balloonAutoPanUseMapMargin:!0,balloonLayout:(t='<div class="'.concat("my-balloon",'">\n    <button class="my-balloon__close-button" type="button"></button>\n    $[[options.contentLayout]]\n  </div>'),ymaps.templateLayoutFactory.createClass(t,{build:function(){this.constructor.superclass.build.call(this),this.element=$(".my-balloon",this.getParentElement()),this.element.find(".my-balloon__close-button").on("click",$.proxy(this.onCloseClick,this)),this.element.find(".balloon__expansion-header").on("click",$.proxy(this.onExpansionHeaderClick,this)),this.element.find(".cluster-balloon__tab-item").on("click",$.proxy(this.onTabItemClick,this))},onCloseClick:function(){this.events.fire("userclose")},onExpansionHeaderClick:function(){var n=this;setTimeout((function(){n.events.fire("shapechange")}),300)},onTabItemClick:function(){var n=this;setTimeout((function(){n.events.fire("shapechange")}),300)},getShape:function(){if(!this.isElement(this.element))return this.constructor.superclass.getShape.call(this);var n=this.element.position();return new ymaps.shape.Rectangle(new ymaps.geometry.pixel.Rectangle([[n.left,n.top],[n.left+this.element[0].offsetWidth,n.top+this.element[0].offsetHeight]]))},isElement:function(n){return n&&n[0]}})),balloonPanelMaxMapArea:0,geoObjectHideIconOnBalloonOpen:!1,openEmptyBalloon:!0,minZoom:5,suppressMapOpenBlock:!0});[{top:0,left:0,width:"35px",height:"100%"},{top:0,right:0,width:"100%",height:"50px"}].forEach((function(n){return i.margin.addArea(n)})),x=function(){var n=new ymaps.Clusterer({clusterIconColor:"#1937ff",clusterBalloonContentLayout:ymaps.templateLayoutFactory.createClass(j),hasHint:!1});return n.events.add("balloonopen",(function(e){var t=e.get("target")._clusterWithOpenBalloon;if(t){var a=t.getGeoObjects();a&&a.length&&(R(),a.forEach((function(e){V(e.properties.get("placemarkId"),n,!0)})))}else V(e.get("target").properties.get("placemarkId"),n,!1)})),n.events.add("balloonclose",(function(){N=0})),$(document).on("click",".balloon__button",(function(n){var e=Number(n.target.dataset.placemarkid);if(e!==z){var t=JSON.parse(n.target.dataset.pvzdata.replace(/'/g,'"')),a=Y(z),o=Y(e),i=o.properties.get("balloonContent");o.properties.set("balloonContent",_),R(),window.parent.postMessage({pvzData:t},"*"),(0,r.H)(1e3).subscribe((function(){z=e;var n=i.replace("balloon__button","balloon__button balloon__button_disabled");if(o.properties.set("balloonContent",n),a){var t=a.properties.get("balloonContent").replace("balloon__button_disabled","");a.properties.set("balloonContent",t)}R()}))}})),n}(),i.geoObjects.add(x),function(n){return n&&n.startAddress&&n.startZip?F(n.startAddress).pipe((0,d.w)((function(e){return e?(0,o.of)(e):K(n.startZip).pipe((0,d.w)((function(n){return n?(0,o.of)(n):q()})))}))):n&&n.startAddress?F(n.startAddress).pipe((0,d.w)((function(n){return n?(0,o.of)(n):q()}))):n&&n.startZip?K(n.startZip).pipe((0,d.w)((function(n){return n?(0,o.of)(n):q()}))):q()}(S).subscribe((function(n){n.center&&i.setCenter(n.center),n.bounds&&i.setBounds(n.bounds)})),i.events.add("boundschange",(function(e){var t=e.originalEvent;n.next(t)})),n.pipe((0,d.w)((function(n){return E!==O&&(O=null),E=null,J(e=n.newBounds).pipe((0,p.b)((function(n){var e=n&&n.boundingBox;E=e&&e.coordinates?[e.coordinates[0][0],e.coordinates[0][2]]:E})),(0,g.j)((function(n){return n.pageNumber<n.totalPages?J(e,n.pageNumber+1):(O=E,(0,s.c)())})),(0,b.z)((function(n){var e=n.data;return(0,o.of)(e)})),(0,m.K)((function(){return(0,o.of)([])})));var e}))).subscribe((function(n){return x.add(function(n){return n.map((function(n){if(e.has(n.id))return null;e.add(n.id),L.has(n.deliveryPointIndex)?L.set(n.deliveryPointIndex,L.get(n.deliveryPointIndex)+1):L.set(n.deliveryPointIndex,1);var t={type:"Feature",id:n.id,geometry:{type:"Point",coordinates:n.geo.coordinates.reverse()},properties:{placemarkId:n.id,index:n.deliveryPointIndex.toString(),balloonContent:_,orderNumber:L.get(n.deliveryPointIndex)}};return new ymaps.GeoObject(t,{iconLayout:"default#image",iconImageHref:an(n.type),iconImageSize:[40,40],iconImageOffset:[-20,-20]})})).filter((function(n){return n}))}(n))}))}function V(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Y(n);X(n).pipe((0,d.w)((function(n){return(0,l.D)(Q(n),(0,o.of)(n))})),(0,h.U)((function(n){var e,t,a=k(n,2),o=a[0],i=a[1];return null!=o&&null!==(e=o.errors)&&void 0!==e&&e.delivery||null!=o&&null!==(t=o.errors)&&void 0!==t&&t.tariff?i.shippingInfo={cost:null,time:null,shipmentType:o.type}:i.shippingInfo={cost:o.tariff.total,time:{description:o.delivery.description,values:{deliveryMin:o.delivery.deliveryMin,deliveryMax:o.delivery.deliveryMax,extraTimeInHours:o.delivery.extraTimeInHours}},shipmentType:o.type},i})),(0,p.b)((function(n){a.properties.set("balloonContent",B(n,0,t)),e.getMap().panTo(a.geometry._coordinates,{useMapMargin:!0}).then((function(){return e.getMap().balloon.autoPan()}))})),(0,v.x)((function(){return t&&R()}))).subscribe()}function Y(n){return x.getGeoObjects().find((function(e){return e&&e.properties&&e.properties.get("placemarkId")&&e.properties.get("placemarkId")===n}))}function B(n,e,a){var o,i,r,s,l,c,u,d,p,g=k(null!==(o=null==n||null===(i=n.shippingInfo)||void 0===i||null===(r=i.time)||void 0===r?void 0:r.description.split(" + "))&&void 0!==o?o:[null,null],2),b=g[0],m=g[1],h=[],v=n.workTime?(p=n.workTime,function(n){return n.map((function(n){var e=k(n.split(", "),3),t=e[0],a=e[1],o=e[2];return"выходной"===a?{weekDay:t,workTime:null,breakTime:null,isRestDay:!0}:{weekDay:t,workTime:a?a.replace("открыто: ",""):null,breakTime:o?o.replace("перерыв: ",""):null,isRestDay:!1}}))}(p).reduce((function(n,e){var t=n[n.length-1];return n.length&&e.workTime===t.workTime&&e.breakTime===t.breakTime?Object.assign(T(n),Z({},n.length-1,{weekDayList:[].concat(T(t.weekDayList),[e.weekDay]),workTime:e.workTime,breakTime:e.breakTime,isRestDaySegment:e.isRestDay})):[].concat(T(n),[{weekDayList:[e.weekDay],workTime:e.workTime,breakTime:e.breakTime,isRestDaySegment:e.isRestDay}])}),[])).map((function(n){var e=n.weekDayList[0],t=n.weekDayList[n.weekDayList.length-1];if(1===n.weekDayList.length)switch(!0){case Boolean(n.isRestDaySegment):return'\n                <span class="balloon__schedule-days">'.concat(nn(e),":</span> выходной\n            ");case Boolean(n.breakTime):return'\n                <span class="balloon__schedule-days">'.concat(nn(e),':</span>\n                <div class="balloon__schedule-intervals">\n                  <span class="balloon__schedule-interval-item">').concat(n.workTime,', </span>\n                  <span class="balloon__schedule-interval-item">перерыв: ').concat(n.breakTime,"</span>\n                </div>\n            ");default:return'\n                <span class="balloon__schedule-days">'.concat(nn(e),":</span> ").concat(n.workTime,"\n            ")}else switch(!0){case Boolean(n.isRestDaySegment):return'\n                <span class="balloon__schedule-days">'.concat(nn(e)," - ").concat(nn(t),":</span> выходной\n            ");case Boolean(n.breakTime):return'\n                <span class="balloon__schedule-days">'.concat(nn(e)," - ").concat(nn(t),':</span>\n                <div class="balloon__schedule-intervals">\n                  <span class="balloon__schedule-interval-item">').concat(n.workTime,', </span>\n                  <span class="balloon__schedule-interval-item">перерыв: ').concat(n.breakTime,"</span>\n                </div>\n            ");default:return'\n                <span class="balloon__schedule-days">'.concat(nn(e)," - ").concat(nn(t),":</span> ").concat(n.workTime,"\n            ")}})).join(""):null,C=n.holidays?function(n){var e=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],t=function(n){var e=n.holidays.map((function(n){return n.work})),t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var a=new Date(t);a.setDate(a.getDate()+7);for(var o=n.holidays.map((function(n){return n.work})).flat().filter((function(n){var e=new Date(n.dt);return e>=t&&e<=a})),i=1;i<o.length;){var r=new Date(o[i-1].dt),s=new Date(o[i].dt);1===Math.ceil(Math.abs(s.getTime()-r.getTime())/864e5)&&o[i-1].st===o[i].st&&o[i-1].fn===o[i].fn?(e[i-1].startDt||(o[i-1].startDt=o[i-1].dt),o[i-1].dt=o[i].dt,o.splice(i,1)):i++}return o}(n);return t.map((function(n){var t=String(n.dt),a="";if(n.startDt){var o=new Date(n.startDt),i=new Date(n.dt),r=o.getDate(),s=i.getDate(),l="".concat(r," - ").concat(s," ").concat(e[o.getMonth()]);a="".concat(String(l))}else{var c=new Date(t),u=c.getDate(),d="".concat(u," ").concat(e[c.getMonth()]);a="".concat(String(d))}return"".concat(a)})).join(", ")}(n):null,w=[],A=function(n){switch(n){case y.RussianPost:return"Почтовое отделение";case y.AdditionalPvz:return"ПВЗ";case y.Postamat:return"Почтомат";default:return""}}(n.type);if(n.type===y.Postamat&&(A+=' "'.concat(n.brandName,'"')),a?w.push('\n      <div class="balloon">\n        <div class="balloon__header cluster-balloon__balloon-header">\n          <div class="balloon__header-wrapper">\n            <span class="balloon__header-title">\n              '.concat(A,"\n            </span>\n    ")):n.type===y.Postamat?w.push('\n          <div class="balloon">\n            <div class="balloon__header">\n              <div class="balloon__header-icon postamat">\n                '.concat(tn(n.type),'\n              </div>\n\n              <div class="balloon__header-wrapper">\n                <span class="balloon__header-title">\n                  ').concat(A,"\n                </span>\n        ")):w.push('\n          <div class="balloon">\n            <div class="balloon__header">\n              <div class="balloon__header-icon">\n                '.concat(tn(n.type),'\n              </div>\n\n              <div class="balloon__header-wrapper">\n                <span class="balloon__header-title">\n                  ').concat(A,"\n                </span>\n        ")),w.push('\n    <div class="balloon__header-subtitle">\n      <span>\n        № '.concat(n.deliveryPointIndex||"","\n      </span>\n  ")),G.showCostInWidget&&null!==(null===(s=n.shippingInfo)||void 0===s?void 0:s.cost)&&(0===n.shippingInfo.cost?h.push(S.accountType===I.BitrixCms?"Бесплатно":"0 ₽"):h.push("".concat(n.shippingInfo.cost/100," ₽"))),G.showDeliveryPeriod&&null!==(null===(l=n.shippingInfo)||void 0===l?void 0:l.time)&&h.push(b),h.length?w.push('\n      •\n      <div class="balloon__tariff">\n        '.concat(h.join(", "),"\n      </div>\n    ")):w.push('\n      •\n      <div class="balloon__tariff"> － </div>\n    '),w.push('\n        </div>\n      </div>\n    </div>\n\n    <div class="balloon__main-content">\n  '),G.showProcessingTime===f.ShowAdditionalTime&&m&&w.push("\n      <div>\n        ".concat(m.replace(/(?![Обработка заказа: ])(.*)$/,'<span class="balloon__processing-time"> $& </span>'),"\n      </div>\n    ")),w.push('\n    <div class="balloon__address">\n      '.concat(n.address?[(c=n.address).place,c.location,on(c)].filter((function(n){return Boolean(n)})).join(", "):"","\n    </div>\n  ")),v&&w.push('\n      <div class="balloon__schedule">'.concat(v,"</div>\n    ")),C&&w.push('\n      <div class="balloon__holidays">\n        <span class="balloon__holidays-title">Праздники:</span>\n        '.concat(C,"\n      </div>\n    ")),(U(n)||n.getto)&&w.push('\n      <div class="balloon__additional-content">\n    '),U(n)&&w.push('\n    <div class="balloon__expansion">\n      <div class="balloon__expansion-header">\n        <span class="balloon__expansion-header-title">Услуги</span>\n\n        <span class="balloon__expansion-header-filler"></span>\n\n        <img class="balloon__expansion-header-indicator" src="'.concat(t(148),'">\n      </div>\n\n      <div class="balloon__expansion-content balloon__available-service-list">\n        ').concat(H(n,M.ReturnAvailable)?'<span class="balloon__available-service">Возможен возврат</span>':"","\n        ").concat(H(n,M.CardPayment)?'<span class="balloon__available-service">Оплата картой</span>':"","\n        ").concat(H(n,M.CashPayment)?'<span class="balloon__available-service">Оплата наличными</span>':"","\n        ").concat(H(n,M.WithFitting)?'<span class="balloon__available-service">Примерка</span>':"","\n        ").concat(H(n,M.ContentsChecking)?'<span class="balloon__available-service">Проверка вложений</span>':"","\n        ").concat(H(n,M.FunctionalityChecking)?'<span class="balloon__available-service">Проверка исправности</span>':"","\n        ").concat(H(n,M.Prepayment)?'<span class="balloon__available-service">Только предоплата</span>':"","\n        ").concat(H(n,M.PartialRedemption)?'<span class="balloon__available-service">Частичный выкуп</span>':"","\n      </div>\n    </div>\n  ")),n.getto&&w.push('\n    <div class="balloon__expansion">\n      <div class="balloon__expansion-header">\n        <span class="balloon__expansion-header-title">Как добраться</span>\n\n        <span class="balloon__expansion-header-filler"></span>\n\n        <img class="balloon__expansion-header-indicator" src="'.concat(t(148),'">\n      </div>\n\n      <div class="balloon__expansion-content">\n        ').concat(n.getto,"\n      </div>\n    </div>\n  ")),(U(n)||n.getto)&&w.push("</div>"),w.push("\n    </div>\n  "),G.isCallbackFunctionNameActive&&G.callbackFunctionName)if(null!==(null===(u=n.shippingInfo)||void 0===u?void 0:u.cost)&&null!==(null===(d=n.shippingInfo)||void 0===d?void 0:d.time)){var _=P({id:n.id,mailType:n.shippingInfo.shipmentType,pvzType:n.type,indexTo:n.deliveryPointIndex,cashOfDelivery:n.shippingInfo.cost,deliveryDescription:n.shippingInfo.time,regionTo:n.address&&n.address.region||null,areaTo:n.address&&n.address.area||null,cityTo:n.address&&n.address.place||null,addressTo:n.address&&on(n.address)||null,weight:(S&&S.weight||G.defaultWeight).toString(),location:n.address&&n.address.location||null},n.deliveryPointIndex.toString().startsWith("9")&&{boxSize:G.defaultBoxSize||null});S&&S.sumoc>=0&&(_.sumoc=S.sumoc.toString()),w.push('\n        <button\n          type="button"\n          class="balloon__button '.concat(Number(z)===Number(n.id)?"balloon__button_disabled":"",'"\n          data-pvzdata="').concat(JSON.stringify(_).replace(/"/g,"'"),'"\n          data-placemarkid="').concat(n.id,'"\n        >\n          Забрать здесь\n        </button>\n      '))}else w.push('<span class="balloon__delivery-error">Невозможно доставить в этот пункт выдачи</span>');return w.push("</div>"),w.join("")}function H(n,e){switch(e){case M.CardPayment:return(n.type===y.RussianPost||n.type===y.AdditionalPvz)&&G.showCardPayment&&n.cardPayment;case M.CashPayment:return n.type===y.AdditionalPvz&&n.cashPayment;case M.ContentsChecking:return(n.type===y.AdditionalPvz||n.acceptEcom&&n.shippingInfo.shipmentType===C.EcomMarketplace)&&n.contentsChecking;case M.Prepayment:return n.type===y.AdditionalPvz&&!(n.cardPayment||n.cashPayment);case M.FunctionalityChecking:return(n.type===y.AdditionalPvz||n.acceptEcom&&n.shippingInfo.shipmentType===C.EcomMarketplace)&&n.functionalityChecking;case M.PartialRedemption:return(n.type===y.AdditionalPvz||n.acceptEcom&&n.shippingInfo.shipmentType===C.EcomMarketplace)&&n.partialRedemption;case M.ReturnAvailable:return(n.type===y.AdditionalPvz||n.acceptEcom&&n.shippingInfo.shipmentType===C.EcomMarketplace)&&n.returnAvailable;case M.WithFitting:return(n.type===y.AdditionalPvz||n.acceptEcom&&n.shippingInfo.shipmentType===C.EcomMarketplace)&&n.withFitting;default:return!1}}function U(n){return Object.values(M).some((function(e){return H(n,e)}))}function J(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=null;O&&(t={prevTopRightPoint:O[0],prevBottomLeftPoint:O[1]});var a=en(),o=S&&S.dimensions?S.dimensions:null,i=new URL("".concat("https://widget.pochta.ru","/api/pvz")),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P(P(P({settings_id:G.id,pageSize:200,page:e,currentTopRightPoint:T(n[0]).reverse(),currentBottomLeftPoint:T(n[1]).reverse()},t),o&&{dimensions:o}),{},{pvzType:a}))};return(0,u.U)(i,r).pipe((0,b.z)((function(n){return n.json()})))}function X(n){return(0,u.U)("".concat("https://widget.pochta.ru","/api/pvz/").concat(n),{method:"GET"}).pipe((0,d.w)((function(n){return n.json()})))}function Q(n){var e="id=".concat(G.id,"&weight=").concat(S&&S.weight||0,"&sumoc=").concat(S&&S.sumoc||0,"&indexTo=").concat(n.deliveryPointIndex,"&type=").concat(n.type===y.AdditionalPvz?C.EcomMarketplace:"");return(0,u.U)("".concat("https://widget.pochta.ru","/api/data/free_tariff_by_settings?").concat(e)).pipe((0,d.w)((function(n){return n.ok||503===n.status?n.json():(0,o.of)(null)})))}function F(n){return(0,c.D)(ymaps.geocode(n,{results:1})).pipe((0,h.U)((function(n){var e,t,a,o,i,r,s=n.geoObjects;return{center:null!==(e=null===(t=s.get(0))||void 0===t||null===(a=t.geometry)||void 0===a?void 0:a.getCoordinates())&&void 0!==e?e:null,bounds:null!==(o=null===(i=s.get(0))||void 0===i||null===(r=i.properties)||void 0===r?void 0:r.get("boundedBy"))&&void 0!==o?o:null}})))}function K(n){var e=new URL("".concat("https://widget.pochta.ru","/api/pvz/find_center_by_zip")),t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({zip:n})};return(0,u.U)(e,t).pipe((0,d.w)((function(n){return n.ok?(0,c.D)(n.json()):(0,o.of)(null)})),(0,h.U)((function(n){var e,t;return{center:null!==(e=null===(t=n.centerPoint.coordinates)||void 0===t?void 0:t.reverse())&&void 0!==e?e:null,bounds:null}})))}function q(){return(0,c.D)(ymaps.geolocation.get()).pipe((0,h.U)((function(n){var e,t=n.geoObjects;return{center:null!==(e=null==t?void 0:t.position)&&void 0!==e?e:null,bounds:null}})))}function nn(n){return n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()}function en(){var n=[];return G&&(G.showRussianPostofficeBranches&&n.push("russian_post"),G.showPartnerOffices&&n.push("additional_pvz"),(D.has(C.OnlineParcel)||D.has(C.EcomMarketplace))&&G.showPostamat&&n.push("postamat")),n}function tn(n){switch(n){case y.RussianPost:return w;case y.Postamat:return A;default:return w}}function an(n){switch(n){case y.RussianPost:return t(194);case y.Postamat:return t(358);default:return t(194)}}function on(n){var e=["".concat(n.house||"").concat(n.letter||""),n.slash?"/".concat(n.slash):"",n.corpus?"к. ".concat(n.corpus):"",n.building?"стр. ".concat(n.building):""].filter((function(n){return n})).join(" ");return[n.street,e].filter((function(n){return Boolean(n)})).join(" ")}$(document).on("click",".cluster-balloon__tab-item",(function(n){var e=$(this).closest(".my-balloon");N=$(this).closest(".cluster-balloon__tab-item").index(),e.find(".cluster-balloon__tab-item").removeClass("active"),$(this).closest(".cluster-balloon__tab-item").addClass("active"),e.find(".cluster-balloon__tab-content").not(".cluster-balloon__tab-content:eq(".concat(n.currentTarget.dataset.contentid,")")).removeClass("active"),e.find("#".concat(n.currentTarget.dataset.contentid)).addClass("active")})),$(document).on("click",".balloon__expansion-header",(function(n){n.currentTarget.parentElement.classList.toggle("active")})),window.addEventListener("load",(function(){return window.parent.postMessage({isMapLoad:!0},"*")})),window.addEventListener("message",(function(n){if(n.data&&n.data.postData&&!S)((S=n.data.postData).accountId?(s=S.accountId,l=S.accountType,(0,u.U)("".concat("https://widget.pochta.ru","/api/sites/public_show"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:s,accountType:l})}).pipe((0,d.w)((function(n){return n&&!n.errors?n.json():(0,i._)(new Error)})),(0,m.K)((function(){return(0,i._)(new Error)})))):(a=S.siteId,r=S.url,(0,u.U)("".concat("https://widget.pochta.ru","/api/sites/").concat(a,"/settings?url=").concat(r),{method:"GET"}).pipe((0,d.w)((function(n){return n&&!n.errors?n.json():(0,i._)(new Error)})),(0,m.K)((function(){return(0,i._)(new Error)}))))).pipe((0,d.w)((function(n){return n&&!n.errors?((G=n).shipmentPriorities&&Array.isArray(G.shipmentPriorities)&&G.shipmentPriorities.forEach((function(n){n.enabled&&D.add(n.shipmentType)})),G.site&&(!G.lastPinged||new Date-new Date(G.lastPinged)>108e5)?function(n,e){return(0,u.U)("".concat("https://widget.pochta.ru","/api/sites/").concat(n,"/ping?url=").concat(e),{method:"put"}).pipe((0,d.w)((function(n){return n.json()})),(0,m.K)((function(){return(0,i._)(new Error)})))}(G.id,S.url):(0,o.of)(G)):(0,i._)(new Error)}))).subscribe((function(){return ymaps.ready(W)}),(function(){$("body").append('<div class="error">Access denied</div>')}));else if(n.data&&n.data.resetSelectedPlacemark){var e=Y(z);if(e){z=null;var t=e.properties.get("balloonContent").replace("balloon__button_disabled","");e.properties.set("balloonContent",t),R()}}var a,r,s,l}))}))},148:function(n){n.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iLjU0IiBzdHJva2Utd2lkdGg9IjEuNSIgZD0iTTQgNmw0IDQgNC00IiAvPgo8L3N2Zz4="},358:function(n){n.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MiIgaGVpZ2h0PSI0MiIgZmlsbD0ibm9uZSI+CiAgPGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj4KICAgIDxnIGZpbHRlcj0idXJsKCNiKSI+CiAgICAgIDxwYXRoIGZpbGw9IiMyQUM3RkMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIzLjQxIDMxLjc0YTE1Ljk2IDE1Ljk2IDAgMSAwLTQuODMgMGwxLjYgNi43OGMuMi44NyAxLjQzLjg3IDEuNjQgMGwxLjYtNi43OFoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPC9nPgogICAgPHBhdGggZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMzMgMTAuMTdoMy4zNHYzLjMzaC0zLjM0di0zLjMzWm01LTEuNjdoLTkuMTZhMi41IDIuNSAwIDAgMC0yLjUgMi41djEwYTIuNSAyLjUgMCAwIDAgMi41IDIuNWgxMS42NmEyLjUgMi41IDAgMCAwIDIuNS0yLjVWMTFhMi41IDIuNSAwIDAgMC0yLjUtMi41aC0yLjVabTMuMzQgMy4zM1YxMWEuODMuODMgMCAwIDAtLjg0LS44M2gtMi41djcuNWgzLjM0VjE2aC0uODRhLjgzLjgzIDAgMCAxLS44My0uODN2LTIuNWEuODMuODMgMCAwIDEgLjgzLS44NGguODRabS01IDMuMzR2Mi41aC0zLjM0di0yLjVoMy4zNFptMCA2LjY2di0yLjVoLTMuMzR2Mi41aDMuMzRabTEuNjYtMi41djIuNWgyLjVhLjgzLjgzIDAgMCAwIC44NC0uODN2LTEuNjdoLTMuMzRabS02LjY2LTUuODN2LTMuMzNoLTIuNWEuODMuODMgMCAwIDAtLjg0LjgzdjIuNWgzLjM0Wm0tMy4zNCAxLjY3djIuNWgzLjM0di0yLjVoLTMuMzRabTMuMzQgNC4xNmgtMy4zNFYyMWEuODMuODMgMCAwIDAgLjg0LjgzaDIuNXYtMi41WiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJhIj4KICAgICAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTAgMGg0MnY0MkgweiIvPgogICAgPC9jbGlwUGF0aD4KICAgIDxmaWx0ZXIgaWQ9ImIiIHdpZHRoPSIzNS4yOCIgaGVpZ2h0PSI0Mi41MyIgeD0iMy4zNiIgeT0iMCIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgogICAgICA8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0iaGFyZEFscGhhIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIi8+CiAgICAgIDxmZU9mZnNldCBkeT0iMS42OCIvPgogICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIuODQiLz4KICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjI1IDAiLz4KICAgICAgPGZlQmxlbmQgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93Xzc4MTQ6NDQxNDEiLz4KICAgICAgPGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93Xzc4MTQ6NDQxNDEiIHJlc3VsdD0ic2hhcGUiLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KPC9zdmc+Cg=="},194:function(n){n.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MiIgaGVpZ2h0PSI0MiIgZmlsbD0ibm9uZSI+CiAgPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CiAgICA8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMF9kKSI+CiAgICAgIDxwYXRoIGZpbGw9IiMxOTM3RkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIKICAgICAgICBkPSJNMjMuNDEgMzEuNzRhMTUuOTYgMTUuOTYgMCAxMC00LjgzIDBsMS42IDYuNzhjLjIuODcgMS40My44NyAxLjY0IDBsMS42LTYuNzh6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIC8+CiAgICA8L2c+CiAgICA8cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICAgIGQ9Ik0xNC4yOCA4LjRhLjg0Ljg0IDAgMDAwIDEuNjhoMTMuNDRhLjg0Ljg0IDAgMDAwLTEuNjhIMTQuMjh6bTEzLjQ0IDMuMzZIMTQuMjhjLS45MyAwLTEuNjguNzUtMS42OCAxLjY4djIuNTJjMCAuOTMuNzUgMS42OCAxLjY4IDEuNjh2NS44OGEuODQuODQgMCAwMDEuNjggMHYtNS44OGgzLjM2djUuMDRjMCAuOTMuNzUgMS42OCAxLjY4IDEuNjhoNS4wNGMuOTMgMCAxLjY4LS43NSAxLjY4LTEuNjh2LTUuMDRjLjkzIDAgMS42OC0uNzUgMS42OC0xLjY4di0yLjUyYzAtLjkzLS43NS0xLjY4LTEuNjgtMS42OHptLTEuNjggNS44OEgyMXY1LjA0aDUuMDR2LTUuMDR6IgogICAgICBjbGlwLXJ1bGU9ImV2ZW5vZGQiIC8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMCI+CiAgICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0wIDBoNDJ2NDJIMHoiIC8+CiAgICA8L2NsaXBQYXRoPgogICAgPGZpbHRlciBpZD0iZmlsdGVyMF9kIiB3aWR0aD0iMzUuMjgiIGhlaWdodD0iNDIuNTMiIHg9IjMuMzYiIHk9IjAiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIKICAgICAgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIC8+CiAgICAgIDxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJoYXJkQWxwaGEiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIC8+CiAgICAgIDxmZU9mZnNldCBkeT0iMS42OCIgLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iLjg0IiAvPgogICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAuMjUgMCIgLz4KICAgICAgPGZlQmxlbmQgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93IiAvPgogICAgICA8ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3ciIHJlc3VsdD0ic2hhcGUiIC8+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+Cjwvc3ZnPg=="}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,a),i.exports}a.m=e,n=[],a.O=function(e,t,o,i){if(!t){var r=1/0;for(u=0;u<n.length;u++){t=n[u][0],o=n[u][1],i=n[u][2];for(var s=!0,l=0;l<t.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(n){return a.O[n](t[l])}))?t.splice(l--,1):(s=!1,i<r&&(r=i));if(s){n.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=n.length;u>0&&n[u-1][2]>i;u--)n[u]=n[u-1];n[u]=[t,o,i]},a.d=function(n,e){for(var t in e)a.o(e,t)&&!a.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},a.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},function(){var n={179:0};a.O.j=function(e){return 0===n[e]};var e=function(e,t){var o,i,r=t[0],s=t[1],l=t[2],c=0;if(r.some((function(e){return 0!==n[e]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(l)var u=l(a)}for(e&&e(t);c<r.length;c++)i=r[c],a.o(n,i)&&n[i]&&n[i][0](),n[i]=0;return a.O(u)},t=self.webpackChunkmap_widget=self.webpackChunkmap_widget||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}();var o=a.O(void 0,[216],(function(){return a(354)}));o=a.O(o)}();